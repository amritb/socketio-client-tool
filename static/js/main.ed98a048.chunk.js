(this["webpackJsonpreact-client-tool"]=this["webpackJsonpreact-client-tool"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(1),r=n.n(a),s=n(23),i=n.n(s),o=(n(80),n(25)),l=n(8),j=(n(81),n(119)),u=n(126),b=n(71),d=n(120);function O(e){var t=e.connData,n=e.createConnection,r=e.eventsToListenFor,s=e.emitTo,i=Object(a.useState)([]),o=Object(l.a)(i,2),O=o[0],h=o[1],f=Object(a.useState)([]),x=Object(l.a)(f,2),v=x[0],m=x[1],g=Object(a.useState)(),p=Object(l.a)(g,2),y=p[0],k=p[1];return Object(a.useEffect)((function(){k((function(){return t.config})),m((function(){return t.server}))}),[t]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(j.a,{variant:"danger",show:t.errors.length>0||O.length>0,children:[t.errors.join(", ")," ",O.join(", ")]}),Object(c.jsxs)(u.a,{onSubmit:function(e){e.preventDefault(),e.stopPropagation();try{JSON.parse(y)}catch(e){return console.log("cannot parse config json",e),void h((function(){return[e]}))}h((function(){return[]})),n(v,y)},children:[Object(c.jsx)(u.a.Row,{className:"mb-2",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{required:!0,value:v,placeholder:"server url",type:"url",onChange:function(e){return m(e.target.value)}})})}),Object(c.jsx)(u.a.Row,{className:"mb-2",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{as:"textarea",placeholder:"JSON config",value:y,onChange:function(e){return k(e.target.value)}})})}),Object(c.jsx)(u.a.Row,{className:"mt-2",children:Object(c.jsxs)(b.a,{children:[Object(c.jsxs)(u.a.Text,{className:"mb-2",children:[Object(c.jsx)("strong",{children:"Listen to"}),": ",r.join(", ")," ",Object(c.jsx)("strong",{children:"Emit to"}),": ",s.join(", ")]}),Object(c.jsx)(d.a,{variant:"success",type:"submit",block:!0,disabled:t.loading,children:t.loading?"Connecting...":"Connect"}),Object(c.jsxs)("div",{className:"mt-3 text-center text-warning",children:["This uses socket.io version 3 and above. For version 2.x use the previous version of socketio-client-tool ",Object(c.jsx)("a",{href:"v1/",children:"here"}),"."]})]})})]})]})}var h=n(128),f=n(121),x=n(122),v=n(72);function m(e){var t=e.data,n=e.title,a=e.stack,r=e.channels,s=e.clearHistory,i=e.emitBack,o=t.map((function(e){return Object(c.jsx)(h.a.Item,{children:Object(c.jsxs)(f.a,{children:[Object(c.jsxs)(b.a,{sm:4,children:[Object(c.jsx)("small",{children:e.date.toLocaleTimeString()})," ",Object(c.jsx)("br",{})," ",Object(c.jsx)(x.a,{variant:"info",children:e.channel})]}),Object(c.jsxs)(b.a,{children:[Object(c.jsx)("div",{className:"float-right",children:Object(c.jsx)(d.a,{className:"function"!==typeof i?"d-none":"",size:"sm",variant:"warning",onClick:function(t){return function(e,t){"function"===typeof i&&i(t.channel,t.data)}(0,e)},children:"emit"})}),Object(c.jsx)("pre",{children:"string"===typeof e.data?e.data:JSON.stringify(e.data,null,2)})]})]})},e.date.toISOString()+"--"+e.channel)}));return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"mt-4 histories",children:[Object(c.jsxs)("h3",{children:[n,Object(c.jsxs)(d.a,{size:"sm",onClick:function(e){s(a,r)},className:o.length>0?"ml-2 ":"d-none",variant:"danger",children:[Object(c.jsx)(v.a,{className:"mr-2"}),"clear"]})]}),Object(c.jsx)(h.a,{variant:"flush rounded text-white",children:o})]})})}function g(e){var t=e.listeners,n=e.addListener,r=e.listenHistory,s=e.clearHistory,i=Object(a.useState)(""),O=Object(l.a)(i,2),h=O[0],f=O[1],x=Object(a.useState)([]),v=Object(l.a)(x,2),g=v[0],p=v[1],y=function(e){return r.filter((function(t){return e===t.channel}))},k=t.map((function(e,t){return Object(c.jsx)(m,{data:y(e),title:e,stack:"listen",channels:[e],clearHistory:s},t)}));return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(j.a,{variant:"danger",show:g.length>0,children:g.join(", ")}),Object(c.jsx)(u.a,{onSubmit:function(e){e.preventDefault(),n([h]),f("")},noValidate:!0,validated:0===g.length,children:Object(c.jsxs)(u.a.Row,{className:"mb-2",children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{placeholder:"listen to a new event...",value:h,onChange:function(e){f(e.target.value.trim()),p((function(e){return[]})),t.includes(e.target.value)&&p((function(e){return[].concat(Object(o.a)(e),["Event already exists"])}))}})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(d.a,{variant:"success",type:"submit",block:!0,disabled:0!==g.length||h.length<1,children:"Add"})})]})})]}),Object(c.jsx)("h3",{children:"Listening to"}),k]})}function p(e){var t=e.emitToChannels,n=e.addEmitTo,r=e.emitData,s=e.emitHistory,i=e.clearHistory,o=e.stack,O=Object(a.useState)("socketio-client"),h=Object(l.a)(O,2),f=h[0],x=h[1],v=Object(a.useState)(""),g=Object(l.a)(v,2),p=g[0],y=g[1],k=Object(a.useState)(!1),S=Object(l.a)(k,2),w=S[0],N=S[1],C=Object(a.useState)(""),H=Object(l.a)(C,2),T=H[0],E=H[1],D=Object(a.useState)([]),J=Object(l.a)(D,2),L=J[0],R=J[1],I=t.map((function(e){return Object(c.jsx)("option",{value:e,children:e},e)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)(u.a,{onSubmit:function(e){e.preventDefault(),n(T),E(""),x((function(){return T}))},className:"mb-3",children:Object(c.jsxs)(u.a.Row,{children:[Object(c.jsx)(b.a,{xs:4,children:Object(c.jsx)(u.a.Control,{size:"sm",value:T,onChange:function(e){return E(e.target.value)},placeholder:"Event name"})}),Object(c.jsx)(b.a,{xs:2,children:Object(c.jsx)(d.a,{size:"sm",variant:"info",type:"submit",block:!0,children:"Add"})})]})}),Object(c.jsx)("hr",{}),Object(c.jsxs)(u.a,{onSubmit:function(e){e.preventDefault();var t=p;if(!0===w)try{t=JSON.parse(p)}catch(n){return void R((function(){return["Failed to parse JSON data: ".concat(n)]}))}y((function(){return""})),R((function(){return[]})),r(f,t)},children:[Object(c.jsx)(j.a,{variant:"danger",show:L.length>0,children:L.join(", ")}),Object(c.jsxs)(u.a.Row,{className:"mb-2",children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{as:"select",value:f,onChange:function(e){return x(e.target.value)},children:I})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Check,{type:"switch",id:"is-json",label:"JSON data",value:w,onChange:function(e){return N((function(){return e.target.checked}))},placeholder:"data...",className:"pt-3 pl-5"})})]}),Object(c.jsx)(u.a.Row,{className:"mb-2",children:Object(c.jsx)(b.a,{children:Object(c.jsx)(u.a.Control,{as:"textarea",value:p,onChange:function(e){return y(e.target.value)}})})}),Object(c.jsx)(u.a.Row,{children:Object(c.jsx)(b.a,{children:Object(c.jsx)(d.a,{variant:"success",type:"submit",block:!0,children:"Emit"})})})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"mt-4",children:Object(c.jsx)(m,{data:s,emitBack:r,title:"Messages",clearHistory:i,stack:o})})]})}function y(e){var t=e.ackHistory,n=e.clearHistory;return Object(c.jsx)(m,{data:t,title:"Messages",stack:"ack",clearHistory:n})}var k=n(73),S=n(123),w=n(127),N=n(124),C=n(125),H=n(56);var T=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),i=Object(l.a)(s,2),j=i[0],u=i[1],d=Object(a.useRef)();d.current=j;var h=Object(a.useState)({connected:!1,loading:!1,server:"http://localhost:8080",config:'{"path": "/socket.io", "forceNew": true, "reconnectionAttempts": 3, "timeout": 2000}',errors:[]}),x=Object(l.a)(h,2),v=x[0],m=x[1],T=Object(a.useState)(0),E=Object(l.a)(T,2),D=E[0],J=E[1],L=Object(a.useState)(["socketio-client","message"]),R=Object(l.a)(L,2),I=R[0],A=R[1],z=Object(a.useState)([]),F=Object(l.a)(z,2),B=F[0],K=F[1],M=Object(a.useState)(["socketio-client","socketio-client-ack"]),U=Object(l.a)(M,2),q=U[0],P=U[1],V=Object(a.useState)([]),G=Object(l.a)(V,2),Q=G[0],W=G[1],X=Object(a.useState)([]),Y=Object(l.a)(X,2),Z=Y[0],$=Y[1],_=Object(a.useState)([]),ee=Object(l.a)(_,2),te=ee[0],ne=ee[1];function ce(e){e.forEach((function(e){var t=[];B.includes(e)||(t.push(e),n.on(e,(function(t){console.log("data received",e,t);var n=new Date,c={key:n.toLocaleString(),date:n,channel:e,data:"string"===typeof t?t:JSON.stringify(t,null,2),dataType:"string"===typeof t?"string":"json"};$((function(e){return[c].concat(Object(o.a)(e))}))}))),K((function(e){return[].concat(t,Object(o.a)(e))}))}))}function ae(e,t){switch(e){case"emit":W((function(){return[]}));break;case"listen":$((function(e){return e.filter((function(e){return!t.includes(e.channel)}))}));break;case"ack":ne((function(){return[]}))}}return Object(a.useEffect)((function(){null!==n&&n.on("connect",(function(){!0!==d.current&&(m((function(){return{connected:!0,loading:!1,server:v.url,socketId:n.id,config:v.config,errors:[]}})),ce(I),u((function(){return!0})))}))})),Object(a.useEffect)((function(){}),[B]),Object(a.useEffect)((function(){if(v.connected)!function(){var e={server:v.server,listen:B,emit:q,config:v.config};window.location.hash=window.btoa(JSON.stringify(e))}();else{var e=""!==window.location.hash&&JSON.parse(window.atob(window.location.hash.split("#")[1]));!1!==e&&0===D&&(J((function(){return 1})),e.listen.length>0&&A((function(){return e.listen})),P((function(){return e.emit})),m((function(){return{connected:!1,loading:!1,server:e.server,config:e.config,errors:[]}})))}}),[v.connected,v.server,v.config,B,q,D]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)(S.a,{children:[Object(c.jsx)(f.a,{children:Object(c.jsxs)(b.a,{className:"text-right",children:[Object(c.jsxs)("span",{className:"small",children:["ID: ",Object(c.jsx)("b",{children:v.socketId})," Server: ",Object(c.jsx)("b",{children:v.server})]}),v.connected?Object(c.jsx)(H.a,{className:"text-success ml-3 h3"}):Object(c.jsx)(H.b,{className:"text-danger mx-2 h3"})]})}),Object(c.jsx)(f.a,{children:Object(c.jsx)(b.a,{children:Object(c.jsxs)(w.a,{defaultActiveKey:"listen",className:"mb-4 nav-fillx",children:[Object(c.jsx)(N.a,{eventKey:"listen",title:"Listen",children:Object(c.jsx)(g,{listeners:B,addListener:ce,listenHistory:Z,clearHistory:ae,stack:"listen"})}),Object(c.jsx)(N.a,{eventKey:"emit",title:"Emit",children:Object(c.jsx)(p,{emitToChannels:q,addEmitTo:function(e){P((function(t){return[e].concat(Object(o.a)(t))}))},emitData:function(e,t){n.emit(e,t,(function(t){var n=new Date,c={key:n.toUTCString(),channel:e,date:n,data:t,type:"string"===typeof t?"string":"json"};ne((function(e){return[c].concat(Object(o.a)(e))}))}));var c=new Date,a={key:c.toUTCString(),channel:e,date:c,data:t,type:"string"===typeof t?"string":"json"};W((function(e){return[a].concat(Object(o.a)(e))}))},emitHistory:Q,clearHistory:ae,stack:"emit"})}),Object(c.jsx)(N.a,{eventKey:"ack",title:"Ack",children:Object(c.jsx)(y,{ackHistory:te,stack:"ack",clearHistory:ae})})]})})})]}),Object(c.jsxs)(C.a,{show:!v.connected,backdrop:"static",centered:!0,size:"lg",children:[Object(c.jsx)(C.a.Header,{children:Object(c.jsx)(C.a.Title,{children:"Configure connection"})}),Object(c.jsx)(C.a.Body,{children:Object(c.jsx)(O,{eventsToListenFor:I,emitTo:q,connData:v,createConnection:function(e,t){m((function(){return{connected:!1,loading:!0,socketId:"connecting..",server:e,config:t,errors:[]}})),r((function(){return Object(k.io)(e,JSON.parse(t))}))}})})]})]})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(T,{})}),document.getElementById("root"))},80:function(e,t,n){},81:function(e,t,n){}},[[117,1,2]]]);
//# sourceMappingURL=main.ed98a048.chunk.js.map